---
# defaults file for waal70.pihole
# Tell the port you want the samba built-in DNS server to listen on
samba_dns_port: "5353"
# Allocate the variable that tells us if samba is present, the playbook will update this if it finds samba
samba_present: false
# Set your samba realm here, if you have a samba AD DC
samba_realm: "samba.authoritativedomain"

# valid options:
# - install: does an installation AND refreshes adlists AND sets local DNS
# - adlists: Upgrades pihole AND refreshes adlists AND sets local DNS
# - local: Upgrades pihole AND sets local DNS
pihole_action: "local"

pihole_localdns_newlist:
   - "1.2.3.4 myserver.authoritativedomain"
pihole_localdns_authoritativedomain: "authoritativedomain"
pihole_localdns_wildcard_ipv4: 1.2.3.4
pihole_localdns_wildcard_ipv6: ff:00:0:0:0:0:0:1

# My provider documents these on https://freedom.nl/page/servers
# Forwarder 1 and 2 are required
forward_dns_1: "185.93.175.43" # Google would be 8.8.8.8
forward_dns_2: "185.232.98.76" # Google would be 8.8.4.4
# Use 3 and 4 for IPv6. You can also leave them empty
forward_dns_3: "2a10:3780:2:52:185:93:175:43"
forward_dns_4: "2a10:3780:2:53:185:232:98:76"

adlists: "{{ lookup('file', 'myadlist.json') | from_json }}"

wl_exact: "{{ lookup('file', 'whitelist-exact.json') | from_json }}"
wl_regex: "{{ lookup('file', 'whitelist-regex.json') | from_json }}"
bl_exact: "{{ lookup('file', 'blacklist-exact.json') | from_json }}"
bl_regex: "{{ lookup('file', 'blacklist-regex.json') | from_json }}"

# For reference: the adlist table looks like:
# CREATE TABLE adlist
#  (
# 	id INTEGER PRIMARY KEY AUTOINCREMENT,
# 	address TEXT UNIQUE NOT NULL,
# 	enabled BOOLEAN NOT NULL DEFAULT 1,
# 	date_added INTEGER NOT NULL DEFAULT (cast(strftime('%s', 'now') as int)),
# 	date_modified INTEGER NOT NULL DEFAULT (cast(strftime('%s', 'now') as int)),
# 	comment TEXT,
# 	date_updated INTEGER,
# 	number INTEGER NOT NULL DEFAULT 0,
# 	invalid_domains INTEGER NOT NULL DEFAULT 0,
# 	status INTEGER NOT NULL DEFAULT 0
# );

# CREATE TABLE domainlist
# (
# 	id INTEGER PRIMARY KEY AUTOINCREMENT,
# 	type INTEGER NOT NULL DEFAULT 0,
# 	domain TEXT NOT NULL,
# 	enabled BOOLEAN NOT NULL DEFAULT 1,
# 	date_added INTEGER NOT NULL DEFAULT (cast(strftime('%s', 'now') as int)),
# 	date_modified INTEGER NOT NULL DEFAULT (cast(strftime('%s', 'now') as int)),
# 	comment TEXT,
# 	UNIQUE(domain, type)
# );
